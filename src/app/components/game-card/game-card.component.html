@if(isGame(game)){
  @if(detailsModal === true) {
    <div class="details-container">
      <div class="details-modal">
        <div class="header-grid">
          <h2 class="details-title">
            {{gameDetail!.name}}
          </h2>
          <p class="close-btn" (click)="closeGameDetails()">
            X
          </p>
        </div>

        <div class="img-and-details">
          <img
          src={{gameDetail?.background_image}}
          alt=""
          />
          <div class="details">
            <p>Release Date: {{gameDetail?.released}}</p>
            <p>MetaCritic Rating: {{gameDetail?.metacritic}} / 100</p>
            <p>ESRB: {{gameDetail?.esrb_rating?.name}}</p>
            <p>
              Platforms: @for (platform of gameDetail?.platforms; track $index) {
                |{{platform.platform.name}}|
              } 
            </p>
            <div class="btn-container">
         
            </div>
          </div>
        </div>
      </div>
    </div>
  }
  <div (click)="openGameDetails(game)" class="bg-img" style="background-image: url({{game.background_image}});">
    <div class="overlay">
      <p>{{game.name}}</p>
      <div class="button-container">
        @if(currentUser?.liked_ids?.includes(game.id)){
          <mat-icon
          matTooltip="Remove favorite"
          aria-label="remove favorite"
          class="fav"
          (click)="unlikeGame(game.id)">
            favorite
          </mat-icon>
        }@else  {
          <mat-icon
          matTooltip="Add to favorites"
          class="not-fav"
          (click)="likeGame(game)"
          >
            favorite
          </mat-icon>
        }
        
        @if(currentUser?.owned_ids?.includes(game.id)){
          <mat-icon
          matTooltip="Remove from owned"
          class="owned"
          (click)="unownGame(game.id)">
            price_check
          </mat-icon>
        }@else {
          <mat-icon 
          matTooltip="Add to owned"
          class="not-owned"
          (click)="ownGame(game)">
            price_check
          </mat-icon>
        }
        @if(currentUser?.backlog_ids?.includes(game.id)){
          <mat-icon
          matTooltip="Remove from backlog"
          class="backlogged"
          (click)="unbacklogGame(game.id)">
            playlist_remove
          </mat-icon>
        }@else {
          <mat-icon 
          matTooltip="Add to backlog"
          class="not-backlogged"
          (click)="backlogGame(game)">
            playlist_add
          </mat-icon>
        }       
      </div>
    </div>
  </div>
}@else {
  @if(detailsModal === true) {
    <div class="details-container">
      <div class="details-modal">
        <div class="header-grid">
          <h2 class="details-title">
            {{gameDetail!.name}}
          </h2>
          <p class="close-btn" (click)="closeGameDetails()">
            X
          </p>
        </div>

        <div class="img-and-details">
          <img
          src={{gameDetail?.background_image}}
          alt=""
          />
          <div class="details">
            <p>Release Date: {{gameDetail?.released}}</p>
            <p>MetaCritic Rating: {{gameDetail?.metacritic}} / 100</p>
            <p>ESRB: {{gameDetail?.esrb_rating?.name}}</p>
            <p>
              Platforms: @for (platform of gameDetail?.platforms; track $index) {
                |{{platform.platform.name}}|
              } 
            </p>
            <div class="btn-container">
         
            </div>
          </div>
        </div>
      </div>
    </div>
  }
  
  <div class="bg-img" (click)="openGameDetails(game)" style="background-image: url({{game.img_url}});">
    <div class="overlay">
      <p>{{game.title}}</p>
      <div class="button-container">
        @if(currentUser?.liked_ids?.includes(game.rawg_id)){
          <mat-icon
          matTooltip="Remove favorite"
          aria-label="remove favorite"
          class="fav"
          (click)="unlikeGame(game.rawg_id)">
            favorite
          </mat-icon>
        }@else  {
          <mat-icon
          matTooltip="Add to favorites"
          class="not-fav"
          (click)="likeGame(game)"
          >
            favorite
          </mat-icon>
        }
        
        @if(currentUser?.owned_ids?.includes(game.rawg_id)){
          <mat-icon
          matTooltip="Remove from owned"
          class="owned"
          (click)="unownGame(game.rawg_id)">
            price_check
          </mat-icon>
        }@else {
          <mat-icon 
          matTooltip="Add to owned"
          class="not-owned"
          (click)="ownGame(game)">
            price_check
          </mat-icon>
        }
        @if(currentUser?.backlog_ids?.includes(game.rawg_id)){
          <mat-icon
          matTooltip="Remove from backlog"
          class="backlogged"
          (click)="unbacklogGame(game.rawg_id)">
            playlist_remove
          </mat-icon>
        }@else {
          <mat-icon 
          matTooltip="Add to backlog"
          class="not-backlogged"
          (click)="backlogGame(game)">
            playlist_add
          </mat-icon>
        }       
      </div>
    </div>
  </div>
}  